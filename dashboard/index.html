<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Enron Risk–Sentiment SNA</title>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<link rel="stylesheet" href="styles.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>

  #statsBox {
    position: absolute;
    top: 0px; right: 0px;
    margin: 10px;
    background: rgba(20,20,20,0.8);
    padding: 1rem;
    border-radius: 6px;
    font-size: 16px;
    color: #ddd;
    max-width: 240px;
    max-height: 90vh;
    overflow-y: auto;
    scrollbar-width: thin;
  }

  #controls {
    position: absolute;
    top: 0px; right: left;
    margin: 10px;
    background: rgba(20,20,20,0.8);
    padding: 1rem;
    border-radius: 6px;
    color: #ddd;
    max-width: 240px;
  }

  .filter-component {
    margin-top: 16px;
  }

  .navBar-subItem {
    margin-left: 32px;
  }

  .navBar-subItem:hover {
    cursor: pointer;
    opacity: 0.75;
  }
</style>
</head>
<body class = "bg-dark m-0 overflow-hidden text-light">

<div class = "root d-flex flex-column">
  <div class = "nav-bar bg-primary p-4 d-flex align-items-center justify-content-between" style="height: 6rem">
    <a href="index.html" class="fs-2 fw-bold text-uppercase text-decoration-none text-light">
      Analysia
    </a>    
    <div class = "d-flex justify-content-between">
      <a href="node_detail.html" class = "navBar-subItem fw-bold text-uppercase text-decoration-none text-light">Actor details</a>
      <a href="threads.html" class = "navBar-subItem fw-bold text-uppercase text-decoration-none text-light">Threads</a>
    </div>
  </div>
  <div class = "main-container position-relative">
    <div id="controls" class = "p-4 d-flex flex-column">
      <label class = "filter-component form-label fs-6 fw-bold">Nodes:
        <input class="form-range" type="range" id="nodeLimit" min="20" max="500" value="100">
        <span id="nodeLimitValue">100</span>
      </label>
      <label class = "filter-component form-label fs-6 fw-bold">Community:
        <select class="form-select form-select-sm" style="margin-top: 4px;" id="communityFilter">
          <option value="all">All</option>
        </select>
      </label>

      <label class="filter-component form-label fs-6 fw-bold">
        Risk Type:
        <select id="riskTypeFilter" class="form-select form-select-sm">
          <option value="all">All</option>
          <option value="nonroutine">Non-Routine Only</option>
        </select>
      </label>
      <label class = "filter-component form-label fs-6 fw-bold">Risk ≥ 
        <input class="form-range" type="range" id="riskFilter" min="0" max="1" step="0.1" value="0">
        <span id="riskValue">0</span>
      </label>

      <label class="filter-component form-label fs-6 fw-bold">
        Sentiment Type:
        <select id="sentimentTypeFilter" class="form-select form-select-sm">
          <option value="all">All</option>
          <option value="nonneutral">Non-Neutral</option>
          <option value="positive">Positive</option>
          <option value="neutral">Neutral</option>
          <option value="negative">Negative</option>
        </select>
      </label>

      <label class = "filter-component form-label fs-6 fw-bold">Sentiment ≥ 
        <input class="form-range" type="range" id="sentimentFilter" min="0" max="1" step="0.1" value="0">
        <span id="sentimentValue">0</span>
      </label>
      <label class = "filter-component form-label fs-6 fw-bold" for="yearSelect">Time Filter:
        <select id="yearSelect" style="margin-left:6px; padding:3px 6px;">
          <option value="all" selected>All Years</option>
          <option value="1999">1999</option>
          <option value="2000">2000</option>
          <option value="2001">2001</option>
          <option value="2002">2002</option>
        </select>
      </label>

    </div>
    <div id="statsBox">Loading metrics...</div>
    <svg id="svg" class = "vw-100 vh-100"></svg>
    <div class="tooltip" style="opacity:0"></div>
  </div>
</div>


<script type="module" src="d3/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>
